# 📚 Study Log - 2025-08-09

## 1. 오늘의 학습 주제
- **Java 콘솔 프로젝트** (회원·채용·지원 기능)
- 개인 회원(U)의 **중복 지원 방지** 로직 구현
- **회원 유형(user_type)** 을 활용한 접근 제어 (U만 지원 가능)
- Oracle DB 연동 시 발생하는 **SQL 에러** 분석 (ORA-00942, ORA-00904, ORA-01722)

---

## 2. 오늘의 문제 상황 & 원인 분석

### (1) 기능 요구사항
- **개인 회원(U)** → 공고 지원 가능
- **중복 지원** → 같은 공고에 2번 이상 지원 불가
- **기업(C), 관리자(A)** → 지원 불가능

### (2) 주요 오류와 원인

#### 1. ORA-00942: 테이블 또는 뷰가 존재하지 않습니다
- **원인**
  - SQL에서 참조하는 테이블이 현재 로그인한 DB 계정(스키마)에 없음
  - 스키마 접두사 미지정, 권한 없음, 테이블명 오타
- **상황**
  - `BaseUI.loginUserType`이 `"U"` 인 경우에만 지원 기능 실행
  - 타입은 잘 가져오는데 SQL 실행 시 에러 발생
  - 원인 확인 → **DAO에서 FROM 뒤에 잘못된 테이블명** 사용
- **배운 점**
  - 에러 발생 시 콘솔로 변수 값 먼저 확인
  - SQL 실행 전, DB 테이블명·컬럼명과 정확히 일치하는지 반드시 점검

#### 2. ORA-00904: 부적합한 식별자
- **원인**
  - SQL에 존재하지 않는 컬럼명 사용
  - 예: DB에는 `USER_NO`인데 코드에서는 `USER_ID`를 참조
- **배운 점**
  - 컬럼명을 적기 전 반드시 DB 설계서 또는 `DESC 테이블명`으로 확인

#### 3. ORA-01722: 수치가 부적합합니다
- **원인**
  - 숫자 타입 컬럼에 문자 값을 바인딩하려고 함
  - 예: `WHERE APPLY_ID = 'ABC'`
- **상황**
  - `APPLY_ID`가 NUMBER 타입인데, 코드에서 `loginUserId`(문자열)를 그대로 바인딩
- **해결 방향**
  - 바인딩 시 타입 맞추기 (`setInt()` vs `setString()` 주의)
  - 필요 시 문자열 → 정수 변환 후 바인딩

---

## 3. 해결 과정
- **변수 값 출력**으로 DAO 진입 전 데이터 정상 여부 확인
- SQL 실행 전 **DB 테이블·컬럼 구조** 재점검
- DAO 메서드별 바인딩 타입 점검 (`setInt` / `setString` 혼동 방지)
- `user_type` 값에 따라 **UI 분기 처리**
- 내일 할 일: DB 설계 점검 + SQL 매핑 로직 검증 + ORA-01722 해결

---

## 4. 배운 점 & 메모
- DB 관련 에러는 **SQL 실행 전 단계**에서부터 데이터 흐름을 확인해야 한다.
- **컬럼명 오타·스키마 차이**는 초보자가 가장 많이 하는 실수 → `DESC`와 설계서 습관적으로 확인하기
- 숫자/문자 바인딩 타입 혼동 시 **ORA-01722** 발생 → PreparedStatement의 `setXXX()` 사용 시 타입 확인 필수
- `active_yn` 같은 상태 컬럼을 활용하면, 물리적 삭제 없이 계정 관리 가능(활성/비활성 제어)

---

## 5. 내일 계획
- ORA-01722 에러 해결 (타입 맞추기)
- 회원 유형 + active_yn 결합한 로그인 접근 제어 구현
- 중복 지원 방지 로직 최종 점검
- DB 설계서에 테이블·컬럼 구조 최신화
